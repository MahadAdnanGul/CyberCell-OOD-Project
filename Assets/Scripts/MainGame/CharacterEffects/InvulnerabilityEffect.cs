using UnityEngine;

namespace MainGame.CharacterEffects
{
    public class InvulnerabilityEffect : MonoBehaviour
    {
        [SerializeField] private float fadeTime = 0.25f;
        [SerializeField] private float fadeAlpha = 0.5f;
        private SpriteRenderer sr;
        private Color initialColor;
        private int tweenId = -1;
        private void Awake()
        {
            sr = GetComponent<SpriteRenderer>();
            initialColor = sr.color;
        }

        public void PlayEffect(float duration)
        {
            LeanTween.Framework.LeanTween.cancel(gameObject,tweenId);
            sr.color = initialColor;
            int numberOfCycles = Mathf.CeilToInt(duration / (fadeTime*2));
            Color newColor = sr.color;
            newColor.a = fadeAlpha;
            tweenId = LeanTween.Framework.LeanTween.color(gameObject, newColor, fadeTime).setLoopPingPong(numberOfCycles).id;
        }
    
    }
}
